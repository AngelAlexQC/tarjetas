# ========================================
# SonarCloud Configuration for Financiero
# React Native / Expo / TypeScript
# ========================================

# Identificación del proyecto
sonar.projectKey=AngelAlexQC_financiero
sonar.organization=angelalexqc
sonar.projectName=Financiero App
sonar.projectVersion=1.0.0

# ========================================
# Fuentes y Exclusiones
# ========================================

# Directorios con código fuente a analizar
sonar.sources=app,components,contexts,hooks,repositories,utils,constants,api

# Exclusiones globales (no analizar)
sonar.exclusions=\
  **/node_modules/**,\
  **/coverage/**,\
  **/.expo/**,\
  **/android/**,\
  **/ios/**,\
  **/dist/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/__tests__/**,\
  **/__mocks__/**,\
  **/test-utils/**

# Archivos de test (para métricas de tests, no para bugs)
# IMPORTANTE: Mantener separados de sources para que no cuenten como código a testear
sonar.tests=.
sonar.test.inclusions=\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/__tests__/**

# ========================================
# Cobertura de código (Jest/LCOV)
# ========================================

# IMPORTANTE: sonar.javascript.lcov.reportPaths funciona para JS y TS
# sonar.typescript.lcov.reportPaths está DEPRECATED - NO usar
sonar.javascript.lcov.reportPaths=coverage/lcov.info

# ========================================
# Configuración de lenguaje
# ========================================

sonar.sourceEncoding=UTF-8

# ========================================
# Quality Gate - Umbrales progresivos
# ========================================

# Cobertura: excluir archivos que no deben ser testeados
sonar.coverage.exclusions=\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/__tests__/**,\
  **/__mocks__/**,\
  **/test-utils/**,\
  **/*.d.ts,\
  **/types.ts,\
  **/index.ts,\
  **/index.tsx,\
  app/_layout.tsx,\
  app/+not-found.tsx,\
  constants/**

# Duplicación: máximo 3% de líneas duplicadas
sonar.cpd.exclusions=**/*.test.ts,**/*.test.tsx,**/__tests__/**

# Tamaño de archivo: advertir en archivos > 500 líneas
# (Los archivos muy grandes son difíciles de mantener)

# Complejidad ciclomática: máximo 15 por función
# (Funciones muy complejas son difíciles de testear)

# Extensiones de archivo a analizar
sonar.javascript.file.suffixes=.js,.jsx
sonar.typescript.file.suffixes=.ts,.tsx

# ========================================
# Quality Gate
# ========================================

# Esperar resultado del Quality Gate (falla el pipeline si no pasa)
sonar.qualitygate.wait=false

# ========================================
# Configuración de Issues
# ========================================

# Importar configuración avanzada de reglas
# Ver .sonarcloud.properties para detalles de reglas deshabilitadas
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10,e11,e12,d1,d2,f1,f2,f3,f4,f5,f6

# Desactivar análisis de duplicación en archivos pequeños
# Solo reportar duplicación en archivos > 50 líneas
sonar.cpd.typescript.minimumLines=50
sonar.cpd.javascript.minimumLines=50

# ========================================
# Duplicaciones
# ========================================

# Exclusiones de análisis de código duplicado
sonar.cpd.exclusions=\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/__tests__/**
